'use strict';

var Item = require('item-class');

var Consumable = function(specs, announcer, config){
  this.imageUrl = config.consumablePath + specs.imageUrl;
  this.category = 'consumable';
  this.listHolder = config.consumableList;

  Item.call(this, specs, announcer);

  this.announcer.publish(this.publish());

  this.liElement.addEventListener('click', this.invest.bind(this));
};

Consumable.prototype = Object.create(Item.prototype);
Consumable.prototype.constructor = Consumable;

Consumable.prototype.invest = function(){
  this.announcer.invest(
    {
      id: this.name,
      number: this.calculatedPrice
    }
  );
  this.select();
};

Consumable.prototype.updatePrice = function(area, level){
  var increase = 250.0 / 3;
  var completedLevels = (area - 1) * 4 + level - 1;
  this.calculatedPrice = this.initialPrice + completedLevels * increase;
  this.labelElement.textContent = this.calculatedPrice;
};


module.exports = Consumable;
