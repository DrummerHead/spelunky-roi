'use strict';

var Item = require('item-class');

var Treasure = function(specs, announcer, config){
  this.imageUrl = config.treasurePath + specs.imageUrl;
  this.category = 'treasure';
  this.listHolder = config.treasureList;

  Item.call(this, specs, announcer);

  this.announcer.publish(this.publish());

  this.liElement.addEventListener('click', this.profit.bind(this));
};

Treasure.prototype = Object.create(Item.prototype);
Treasure.prototype.constructor = Treasure;

Treasure.prototype.profit = function(){
  this.announcer.profit(
    {
      id: this.name,
      number: this.calculatedPrice
    }
  );
  this.select();
};

Treasure.prototype.updatePrice = function(area){
  var increase = this.initialPrice / 4;
  this.calculatedPrice = this.initialPrice + ((area - 1) * increase);
  this.labelElement.textContent = this.calculatedPrice;
  return this.calculatedPrice;
};


module.exports = Treasure;
